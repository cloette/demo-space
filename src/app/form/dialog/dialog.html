<h1 mat-dialog-title>Add/Edit Field</h1>
<div mat-dialog-content>
  <mat-form-field>
    <input matInput [(ngModel)]="data.order">
    <mat-hint>The order each field appears in, sorted in ascending order. (0 means it will be shown first)</mat-hint>
  </mat-form-field>
  <mat-form-field>
    <mat-select placeholder="Field Type">
      <mat-option *ngFor="let type of types" [(value)]="data.type">
        {{ type.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field>
    <input matInput [(ngModel)]="data.question">
    <mat-hint>What do you want to measure?</mat-hint>
  </mat-form-field>
  <div *ngIf="needsOptions(data.type)">
    <div *ngIf="data.options">
      <div *ngFor="let option of data.options; index as i">
        <mat-form-field>
          <input matInput [(ngModel)]="option.helperText">
          <mat-hint>Text to show for this option</mat-hint>
        </mat-form-field>
        <mat-form-field>
          <input matInput [(ngModel)]="option.value">
          <mat-hint>Value of this option (number)</mat-hint>
        </mat-form-field>
        <button mat-button (click)="removeOption(i)">Delete</button>
      </div>
    </div>
    <div *ngIf="addAnOption">
      <mat-form-field>
        <input matInput [(ngModel)]="newOption.helperText">
        <mat-hint>Text to show for this option</mat-hint>
      </mat-form-field>
      <mat-form-field>
        <input matInput [(ngModel)]="newOption.value">
        <mat-hint>Value of this option (number)</mat-hint>
      </mat-form-field>
      <button mat-button (click)="toggleAddAnOption()">Cancel</button>
      <button mat-button (click)="addOption()" cdkFocusInitial>Save</button>
    </div>
    <div *ngIf="!addAnOption">
      <button mat-button (click)="toggleAddAnOption()">Add</button>
    </div>
  </div>
  <mat-form-field>
    <input matInput [(ngModel)]="data.maxValue">
    <mat-hint>What's the highest possible score for this field? (before multiplier is applied?)</mat-hint>
  </mat-form-field>
  <mat-form-field>
    <input matInput [(ngModel)]="data.multiplier">
    <mat-hint>How important is this, relative to other items? (field score is multiplied by this number)</mat-hint>
  </mat-form-field>
  <mat-form-field>
    <mat-slide-toggle [(ngModel)]="data.disabled">Disabled</mat-slide-toggle>
    <mat-hint>By default, fields are enabled. Disabled fields are not counted in the scoring process.</mat-hint>
  </mat-form-field>
  <p>Please note: you must still save the form after saving the field.</p>
</div>
<div mat-dialog-actions>
  <button mat-button (click)="onNoClick()">Cancel</button>
  <button mat-button [mat-dialog-close]="data" cdkFocusInitial>Save Changes</button>
</div>
