<h1 mat-dialog-title>Add/Edit Field</h1>
<div mat-dialog-content>
  <form class="form-horizontal">
    <mat-form-field>
      <input matInput type="text" [(ngModel)]="question" name="question" placeholder="Question">
      <mat-hint align="start">What do you want to measure?</mat-hint>
    </mat-form-field>
    <mat-form-field>
      <mat-select [(ngModel)]="type" name="type" placeholder="Field Type">
        <mat-option *ngFor="let t of types" [(value)]="t.value">
          {{ t.viewValue }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <input matInput type="number" [(ngModel)]="order" name="order" placeholder="Order">
      <mat-hint align="start">The order each field appears in, sorted in ascending order. (0 means it will be shown first)</mat-hint>
    </mat-form-field>

    <div *ngIf="needsOptions()">
      <div *ngIf="!addAnOption">
        <h4>Options</h4>
        <div *ngIf="options">
          <div *ngFor="let option of options; index as i">
            <p>Option {{i}}:
              <br />Display Name: {{ option.helperText }}
              <br />Value: {{ option.value }}
            </p>
            <button type="button" mat-button (click)="removeOption(i)">Delete</button>
          </div>
        </div>
        <button type="button" mat-button color="primary" (click)="toggleAddAnOption()">Add an option</button>
      </div>
      <div *ngIf="addAnOption">
        <form class="form-horizontal" style="border:1px solid grey; padding:20px;">
          <mat-form-field>
            <input matInput type="text" [(ngModel)]="optionsHelperText" name="helperText" placeholder="Option Display Name">
            <mat-hint align="start">Text to show for this option</mat-hint>
          </mat-form-field>
          <mat-form-field>
            <input matInput type="number" [(ngModel)]="optionsValue" name="optionValue" placeholder="Option Value">
            <mat-hint align="start">Value of this option (number)</mat-hint>
          </mat-form-field>
          <br />
          <br />
          <button type="button" mat-button (click)="toggleAddAnOption()">Cancel</button>
          <button type="button" mat-button color="primary" (click)="addOption()" cdkFocusInitial>Save</button>
        </form>
      </div>
    </div>

    <mat-form-field>
      <input matInput type="number" [(ngModel)]="maxValue" name="maxValue" placeholder="Maximum Value">
      <mat-hint align="start">What's the highest possible score for this field? (before multiplier is applied?)</mat-hint>
    </mat-form-field>
    <mat-form-field>
      <input matInput type="number" [(ngModel)]="value" name="value" placeholder="Default Value">
      <mat-hint align="start">What's the default value for this field? (before multiplier is applied?)</mat-hint>
    </mat-form-field>
    <mat-form-field>
      <input matInput type="number" [(ngModel)]="multiplier" name="multiplier" placeholder="Multiplier">
      <mat-hint align="start">How important is this, relative to other items? (field score is multiplied by this number - defaults to 1)</mat-hint>
    </mat-form-field>
    <mat-form-field>
      <mat-slide-toggle [(ngModel)]="disabled" name="disabled" placeholder="Disable this field?"></mat-slide-toggle>
      <mat-hint align="start">
        By default, fields are enabled. Disabled fields are not counted in the scoring process.</mat-hint>
    </mat-form-field>
  </form>

  <p>Please note: you must still save the form after saving the field.</p>
</div>
<div mat-dialog-actions>
  <button type="button" mat-button (click)="onNoClick()">Cancel</button>
  <button type="button" mat-button color="primary" (click)="save()" [mat-dialog-close]="data" cdkFocusInitial>Save Changes</button>
</div>
