<h2>Form</h2>

<div *ngIf="firstVisit">
  <button mat-raised-button color="primary" class="green" (click)="makeBlankForm()">
    Create a form
  </button>,
  <br/>
  <br/>
  <button mat-raised-button (click)="toggle2()">
    Create a form by keyword
  </button>,
  <br/>
  <br/> or
  <button mat-raised-button color="primary" class="lightgreen" (click)="toggle1()">
    Load a form
  </button>
  <br />
  <br />
  <div *ngIf="showFormIDField">
    <form class="form">
      <mat-form-field style="margin-right: 20px;">
        <input matInput label="id" placeholder="Enter an ID here" [formControl]="id" />
      </mat-form-field>
      <button type="button" mat-raised-button (click)="updateFormID()">Fetch form</button>
      <br />
      <p style="font-size: 12px;line-height: 1.4em;">This field defaults to your profile ID if left blank.</p>
    </form>
  </div>
  <div *ngIf="showSpecificFormField">
    <form class="form">
      <mat-form-field style="margin-right: 20px;">
        <input matInput label="sid" placeholder="Enter an ID here" [formControl]="sid" />
      </mat-form-field>
      <button type="button" mat-raised-button (click)="makeSpecificForm()">Create form</button>
      <br />
      <p style="font-size: 12px;line-height: 1.4em;">This field defaults to your profile ID if left blank.</p>
    </form>
  </div>
</div>

<div *ngIf="!firstVisit">
  <div *ngIf="dataReady">
    <div class="floating-button">
      <button type="button" mat-fab (click)="openDialog(newField,9,true)">
        <!-- Displays add field form -->
        <mat-icon aria-label="Add Field" title="Add Field">add</mat-icon>
      </button>
    </div>
    <!-- Form fields displayed as list-->
    <table *ngIf="form.fields" class="formTable">
      <div *ngFor="let field of form.fields; index as i">
        <tr>
          <td class="formIconColumn">
            <mat-icon class="greytext" aria-label="Delete" aria-hidden="true" (click)="removeField(i)">delete</mat-icon>
          </td>
          <td class="formIconColumn">
            <mat-icon style="color:#3e7ca7" aria-label="Field Type" aria-hidden="true" [innerHtml]="getTypeIcon(field.type)"></mat-icon>
          </td>
          <td>{{ field.question || "Cannot read field name." }}</td>
          <td class="formIconColumn">
            <mat-icon aria-label="Edit" aria-hidden="true" (click)="openDialog(field,i,false)">
              edit</mat-icon>
          </td>
        </tr>
      </div>
    </table>
  </div>
  <div *ngIf="!dataReady">
    <app-ui-loader [visible]="true"></app-ui-loader>
  </div>
  <br />
  <button type="button" mat-raised-button (click)="loadFormOptions()">
    Cancel
  </button>
  <button type="button" mat-raised-button color="primary" (click)="saveForm()">
    Save Changes
  </button>
  <br /><br />
  <button type="button" mat-raised-button color="warn" (click)="clearForm()">
    Start Over (Blank Form)
  </button>
</div>
